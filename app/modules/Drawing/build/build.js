!function(){"use strict";angular.module("DrawingModule",[])}(),function(){"use strict";function a(a,b,c){function d(a){switch(a){case"Point":l.info="Para desenhar um ponto, faça clique no mapa.";break;case"LineString":l.info="Para desenhar uma linha, vá clicando no mapa. Duplo clique termina a linha.";break;case"Polygon":l.info="Para desenhar um polígono, vá clicando no mapa. Duplo clique fecha o polígono."}}function e(){f=new ol.format.GeoJSON({featureProjection:ol.proj.get("EPSG:27493")}),g=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(174, 0, 0, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.75)",width:2}),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(174, 0, 0, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.75)"})})}),h=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(174,0,0,0.75)",width:2}),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(174,0,0,0.75)"}),stroke:new ol.style.Stroke({color:"rgba(255, 255, 255, 0.3)"})})}),i=new ol.source.Vector({wrapX:!1}),i.on("addfeature",function(){b.userFeatures=f.writeFeatures(j.getSource().getFeatures(),{dataProjection:ol.proj.get("EPSG:27493"),featureProjection:"EPSG:3857"})}),j=new ol.layer.Vector({source:i,style:g}),l.info=o}var f,g,h,i,j,k,l=this,m=b.map,n=c,o="Utilize os botões para definir o tipo de desenho desejado.";e(),l.setDrawingMode=function(c){n.setMapInteraction("DragPan"),d(c),m.removeInteraction(k),m.removeLayer(j),k=new ol.interaction.Draw({source:i,style:h,type:c}),m.addInteraction(k),k.once("drawend",function(c){c.feature.set("type",c.feature.getGeometry().getType()),b.map.removeInteraction(k),l.info=o,a.$apply()}),m.addLayer(j)},l.clearDraw=function(){m.removeLayer(j),j.getSource().clear()},a.$on("resetPrinting",function(){l.clearDraw()})}angular.module("DrawingModule").controller("DrawingController",a),a.$inject=["$scope","MapService","MapInteractionsService"]}();