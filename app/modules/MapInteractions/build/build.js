!function(){"use strict";angular.module("MapInteractionsModule",[])}(),function(){"use strict";function a(a){function b(b,c,f){f.forEach(function(f){if(f.isQueryable()){var g=f.getSource().getGetFeatureInfoUrl(ol.proj.transform(b.coordinate,"EPSG:3857",ol.proj.get("EPSG:27493")),c.getResolution(),ol.proj.get("EPSG:27493"),{INFO_FORMAT:"application/json"});if(g){d();new ol.format.GeoJSON;a({url:g}).then(function(a){a.data.features.length>0&&e.push(a.data)})}}})}function c(){return e}function d(){e.length=0}var e=[];this.getResults=c,this.getLayersInfo=b,this.clearResults=d}angular.module("MapInteractionsModule").service("LayerQueryResultsService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a,b,c){var d={interaction:"",interactionText:""};this.setMapInteraction=function(c){switch(a.map.getInteractions().pop(),c){case"DragPan":d.interactionText="Mover Mapa",a.map.addInteraction(new ol.interaction.DragPan);break;case"ZoomIn":d.interactionText="Aproximar Mapa",a.map.addInteraction(new ol.interaction.Pointer({handleDownEvent:function(b){var c=a.map.getView();c.setCenter(b.coordinate),c.setZoom(c.getZoom()+1)}}));break;case"ZoomOut":d.interactionText="Afastar Mapa",a.map.addInteraction(new ol.interaction.Pointer({handleDownEvent:function(b){var c=a.map.getView();c.setCenter(b.coordinate),c.setZoom(c.getZoom()-1)}}));break;case"ZoomBox":d.interactionText="Fazer Zoom de Caixa",a.map.addInteraction(new ol.interaction.DragZoom({condition:ol.events.condition.always,className:"drag_zoom_box"}));break;case"Identify":d.interactionText="Identificar Camadas",a.map.addInteraction(new ol.interaction.Pointer({handleDownEvent:function(a){b.getLayersInfo(a,a.map.getView(),a.map.getLayers().getArray())}}))}d.interaction=c},this.getMapInteraction=function(){return d.interaction},this.getText=function(){return d.interactionText},this.setText=function(a){d.interactionText=a}}angular.module("MapInteractionsModule").service("MapInteractionsService",a),a.$inject=["MapService","LayerQueryResultsService","$http"]}(),function(){"use strict";function a(){return function(a){return angular.isNumber(a)?a:a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():""}}angular.module("MapInteractionsModule").filter("capitalize",a)}(),function(){"use strict";function a(a,b){function c(){d.results=[]}var d=this;c(),d.title="Resultados da Pesquisa",a.$watchCollection(function(){return b.getResults()},function(a){d.results=a}),d.hasResults=function(){return d.results.length>0}}angular.module("MapInteractionsModule").controller("LayerResultsController",a),a.$inject=["$scope","LayerQueryResultsService"]}(),function(){"use strict";function a(a,b,c,d){d.setMapInteraction("DragPan"),this.search=!1,this.isActive=function(a){return this.active==a},this.setDefaultView=function(a){c.setDefaultView()},this.setInteraction=function(a){d.setMapInteraction(a)},this.showMenu=function(){this.menuIsHidden=!1},this.showSearchBar=function(){this.search=!this.search},this.isSearch=function(){return!this.search},a.$watch(function(){return d.getMapInteraction()},function(b){a.itCtrl.active=b}),a.$watch("itCtrl.active",function(){a.itCtrl.currentInteraction=d.getText()}),a.$watch("itCtrl.menuIsHidden",function(){b(function(){c.map.updateSize()},10)})}angular.module("MapInteractionsModule").controller("MapInteractionsController",a),a.$inject=["$scope","$timeout","MapService","MapInteractionsService"]}(),function(){"use strict";function a(a){function b(b,c,d){a.map.addControl(new ol.control.MousePosition({coordinateFormat:function(a){return ol.coordinate.format(a," {x} , {y} ",4)},projection:"EPSG:4326",className:"",target:document.getElementById("coordinate4326"),undefinedHTML:"&nbsp;"})),a.map.addControl(new ol.control.MousePosition({coordinateFormat:function(a){return ol.coordinate.format(a," {x} , {y} ",4)},projection:ol.proj.get("EPSG:27493"),className:"",target:document.getElementById("coordinate27493"),undefinedHTML:"&nbsp;"}))}var c={bindToController:!0,controller:"MapInteractionsController",controllerAs:"itCtrl",link:b,restrict:"E",scope:{menuIsHidden:"="},templateUrl:"app/templates/MapInteractionsTemplate.html"};return c}angular.module("MapInteractionsModule").directive("mapInteractions",a),a.$inject=["MapService"]}();