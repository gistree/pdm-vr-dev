!function(){"use strict";angular.module("AuthenticationModule",[])}(),function(){"use strict";function a(a){function b(b,c){return a({url:"/credentials/login",method:"POST",data:{username:b,password:c},xhrFields:{withCredentials:!0}})}function c(){return a({url:"/credentials/logout",method:"POST"})}function d(a){h=a,i=!0}function e(){h="",i=!1}function f(){return i}function g(){return h}var h="",i=!1;this.login=b,this.logout=c,this.loginUser=d,this.logoutUser=e,this.isUserLogged=f,this.getUsername=g}angular.module("AuthenticationModule").service("CredentialsService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a,b,c){var d=this;this.submit=function(e){a.submitted=!0,e.$invalid||c.login(d.username,d.password).then(function(d){d.data.data.forEach(function(a){b.addLayer(a)}),c.loginUser(d.data.username),a.closeThisDialog()},function(a){d.invalidUser=!0,d.invalidPass=!0,d.message="O login falhou."})},this.reset=function(a){d[a]=!1}}angular.module("AuthenticationModule").controller("DialogController",a),a.$inject=["$scope","LayersFactory","CredentialsService"]}(),function(){"use strict";function a(a,b,c,d){function e(){f.isLogged=c.isUserLogged(),f.username=c.getUsername(),window.ctrl=f}var f=this;this.login=function(){a.open({template:"app/templates/login.html",className:"ngdialog-theme-default",showClose:!1,controller:"DialogController",controllerAs:"dialogCtrl"})},this.logout=function(){c.logout().then(function(a){d.removeProtectedLayers(),c.logoutUser()},function(a){d.removeProtectedLayers(),c.logoutUser()})},b.$watch(function(){return c.isUserLogged()},function(a){f.isLogged=c.isUserLogged(),f.username=c.getUsername()}),e()}angular.module("AuthenticationModule").controller("LoginController",a),a.$inject=["ngDialog","$scope","CredentialsService","LayersFactory"]}();