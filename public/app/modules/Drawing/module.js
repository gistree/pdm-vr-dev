!function(){"use strict";angular.module("DrawingModule",[])}(),function(){"use strict";function a(a,b){function c(a){switch(a){case"Point":k.info="Para desenhar um ponto, faça clique no mapa.";break;case"LineString":k.info="Para desenhar uma linha, vá clicando no mapa. Duplo clique termina a linha.";break;case"Polygon":k.info="Para desenhar um polígono, vá clicando no mapa. Duplo clique fecha o polígono."}}function d(){e=new ol.format.GeoJSON({featureProjection:ol.proj.get("EPSG:27493")}),f=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(174, 0, 0, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.75)",width:2}),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(174, 0, 0, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.75)"})})}),g=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.3)"}),stroke:new ol.style.Stroke({color:"rgba(174,0,0,0.75)",width:2}),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"rgba(174,0,0,0.75)"}),stroke:new ol.style.Stroke({color:"rgba(255, 255, 255, 0.3)"})})}),h=new ol.source.Vector({wrapX:!1}),h.on("addfeature",function(){b.userFeatures=e.writeFeatures(i.getSource().getFeatures(),{dataProjection:ol.proj.get("EPSG:27493"),featureProjection:"EPSG:3857"})}),i=new ol.layer.Vector({source:h,style:f}),k.info=m}var e,f,g,h,i,j,k=this,l=b.map,m="Utilize os botões para definir o tipo de desenho desejado.";d(),k.setDrawingMode=function(d){c(d),l.removeInteraction(j),l.removeLayer(i),j=new ol.interaction.Draw({source:h,style:g,type:d}),l.addInteraction(j),j.once("drawend",function(c){c.feature.set("type",c.feature.getGeometry().getType()),b.map.removeInteraction(j),k.info=m,a.$apply()}),l.addLayer(i)},k.clearDraw=function(){l.removeLayer(i),i.getSource().clear()},a.$on("resetPrinting",function(){k.clearDraw()})}angular.module("DrawingModule").controller("DrawingController",a),a.$inject=["$scope","MapService"]}();